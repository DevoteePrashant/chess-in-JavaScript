<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
<style>* {
    margin: 0;
    padding: 0;
}

body {
    display: flex;
    place-items: center;
    justify-content: center;
    overflow-x: hidden;
    height: 100vh;
}

.container {
    display: grid;
    place-items: center;
    justify-content: center;
}

.div {
    display: flex;
}

ul {
    display: grid;
    grid-template-columns: 1fr;
}

li {
    list-style: none;
    display: grid;
    place-items: center;
    font-size: 0;
}

.box {
    width: 75px;
    height: 55px;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.9);
}

h1 {
    margin: 20px;
    font-size: 2.5rem;
    text-align: center;
    color: black;
    border: 2px solid black;
    padding: 10px;
    background-color: gray;
    border-radius: 5px;
}

#tog {
    margin: 40px 0px;
    font-size: 1.5rem;
    text-align: left;
    background-color: #fff;
    color: #000;
    border: 2px solid #fff;
    padding: 10px;
    border-radius: 5px;
}

#reset-btn ,.sumbmit {
    background-color: #607d83;
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin-top: 4px;
    cursor: pointer;
}

.all-img {
    width: 65px;
    position: relative;
    bottom: 5px;
}

.all-pawn {
    transform: scale(.7);
}

.authcont {
    width: 70vw;
}

.author {
    float: right;
    margin-right: 50px;
}



.timer-container {
    text-align: center;
}

#timer {
    font-size: 48px;
    font-weight: bold;
    margin-top: 20px;
}


@media (max-width:650px) {
    .box {
        width: 7vw;
        height: 7vw;
    }

    .all-img {
        width:7vw;
    }
    #tog {
        margin: 30px 0px;
        font-size: 20px;
    }
    #reset-btn {
        font-size: 10px;
    }
    h1{
        font-size: 30px;
    }

}

@media (max-width:400px) {

    h1{
        font-size: 20px;
    }
    #tog {
        margin: 30px 0px;
        font-size: 10px;
    }

}

</style>
</head>
<body>
    
    <div class="container">
        <h1> CHESS</h1>

      <ul class="ul">
      </ul>

      <div id="timer"></div>
      <input type="text" id="name" placeholder="Enter your name">
      <div class="sumbmit" id="stop-btn"  > start user</div>
      <div id="timeRangesDiv"></div>
      <h2 id="tog">White's Turn</h2>
      <h2 id="message"></h2>
      <h2 id="reset-btn">Reset Game</h2>
    </div>

    <div id="result"></div>

  <script >
  const chessboard = document.querySelector('.ul');

for (let i = 8; i >= 1; i--) {
  const row = document.createElement('div');
  row.className = 'div';
  row.id = `row${i}`;

  for (let j = 1; j <= 8; j++) {
    const box = document.createElement('li');
    box.className = 'box';
    box.id = `b${i}${j}`;

    if (i === 8) {
      // black pieces
      if (j === 1 || j === 8) {
        box.textContent = 'Brook';
      } else if (j === 2 || j === 7) {
        box.textContent = 'Bknight';
      } else if (j === 3 || j === 6) {
        box.textContent = 'Bbishop';
      } else if (j === 4) {
        box.textContent = 'Bqueen';
      } else if (j === 5) {
        box.textContent = 'Bking';
      }
    } else if (i === 7) {
      // black pawns
      box.textContent = 'Bpawn';
    } else if (i === 2) {
      // white pawns
      box.textContent = 'Wpawn';
    } else if (i === 1) {
      // white pieces
      if (j === 1 || j === 8) {
        box.textContent = 'Wrook';
      } else if (j === 2 || j === 7) {
        box.textContent = 'Wknight';
      } else if (j === 3 || j === 6) {
        box.textContent = 'Wbishop';
      } else if (j === 4) {
        box.textContent = 'Wqueen';
      } else if (j === 5) {
        box.textContent = 'Wking';
      }
    }

    row.appendChild(box);
  }

  chessboard.appendChild(row);
}
  
function insertImage() {
    document.querySelectorAll('.box').forEach(image => {
        if (image.textContent.length !== 0) {
            if (image.textContent == 'Wpawn' || image.textContent == 'Bpawn') {
                image.innerHTML = `${image.textContent} <img class='all-img all-pawn' src="${image.textContent}.png" alt="">`
                image.style.cursor = 'pointer'
            }
            else {
                image.innerHTML = `${image.textContent} <img class='all-img' src="${image.textContent}.png" alt="">`
                image.style.cursor = 'pointer'
            }
        }
    })
    let gameState = [];
    document.querySelectorAll('li.box').forEach(liElement => {
        gameState.push({
            id: liElement.id,
            text: liElement.textContent,
            outerHTML: liElement.outerHTML,
        });
    });
    localStorage.setItem('gameState 1', JSON.stringify(gameState));
}
insertImage()

let gameEnded = false;
tog = 1

document.querySelectorAll('.box').forEach(item => {
    

    item.addEventListener('click', function () {
        
        if (gameEnded) return; 

        if (item.style.backgroundColor == 'green' && item.textContent.length == 0) {
            tog = tog + 1;
        } else if (item.style.backgroundColor == 'green' && item.textContent.length !== 0) {
            document.querySelectorAll('.box').forEach(i => {
                if (i.style.backgroundColor == 'blue') {
                    blueId = i.id;
                    blueText = i.textContent;

                    // Check if the White King is captured
                        if (item.textContent == 'Wking') {
                            document.getElementById('message').textContent = 'Bking wins!';
                            gameEnded = true; 
                        }

                        if (item.textContent == 'Bking') {
                            document.getElementById('message').textContent = 'wking wins!';
                            gameEnded = true; 
                        }

                    document.getElementById(blueId).textContent = '';
                    item.textContent = blueText;
                    coloring();
                    insertImage();
                    tog = tog + 1;
                }
            });
        }

        if (gameEnded) return; 


        getId = item.id
        arr = Array.from(getId)
        arr.shift()
        aside = Number(arr.pop())
        arr.push('0')
        aup = Number(arr.join(''))
        a = aside + aup

        //function to display the available paths for all pieces

        function whosTurn(toggle) {
            // PAWN

            if (item.textContent == `${toggle}pawn`) {
                item.style.backgroundColor = 'blue';

           
                if (tog % 2 !== 0 && aup < 800) {


                    // First move for white pawns
                    if (document.getElementById(`b${a + 100}`).textContent.length == 0) {
                        document.getElementById(`b${a + 100}`).style.backgroundColor = 'green';
                        if (document.getElementById(`b${a + 200}`).textContent.length == 0 && aup < 300) {
                            document.getElementById(`b${a + 200}`).style.backgroundColor = 'green';
                        }
                    }
                    if (aside < 8 && document.getElementById(`b${a + 100 + 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a + 100 + 1}`).style.backgroundColor = 'green';
                    }
                    if (aside > 1 && document.getElementById(`b${a + 100 - 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a + 100 - 1}`).style.backgroundColor = 'green';
                    }
                }

                if (tog % 2 == 0 && aup > 100) {
                    // First move for black pawns
                    if (document.getElementById(`b${a - 100}`).textContent.length == 0) {
                        document.getElementById(`b${a - 100}`).style.backgroundColor = 'green';
                        if (document.getElementById(`b${a - 200}`).textContent.length == 0 && aup > 600) {
                            document.getElementById(`b${a - 200}`).style.backgroundColor = 'green';
                        }
                    }
                    if (aside < 8 && document.getElementById(`b${a - 100 + 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a - 100 + 1}`).style.backgroundColor = 'green';
                    }
                    if (aside > 1 && document.getElementById(`b${a - 100 - 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a - 100 - 1}`).style.backgroundColor = 'green';
                    }
                }
                // Second move for pawns
                if (tog % 2 !== 0 && aup >= 800) {
                    if (document.getElementById(`b${a + 100}`).textContent.length == 0) {
                        document.getElementById(`b${a + 100}`).style.backgroundColor = 'green';
                    }
                    if (aside < 8 && document.getElementById(`b${a + 100 + 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a + 100 + 1}`).style.backgroundColor = 'green';
                    }
                    if (aside > 1 && document.getElementById(`b${a + 100 - 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a + 100 - 1}`).style.backgroundColor = 'green';
                    }
                }
                if (tog % 2 == 0 && aup <= 100) {
                    if (document.getElementById(`b${a - 100}`).textContent.length == 0) {
                        document.getElementById(`b${a - 100}`).style.backgroundColor = 'green';
                    }
                    if (aside < 8 && document.getElementById(`b${a - 100 + 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a - 100 + 1}`).style.backgroundColor = 'green';
                    }
                    if (aside > 1 && document.getElementById(`b${a - 100 - 1}`).textContent.length !== 0) {
                        document.getElementById(`b${a - 100 - 1}`).style.backgroundColor = 'green';
                    }
                }
            }

            // KING

            if (item.textContent == `${toggle}king`) {


                if (aside < 8) {
                    document.getElementById(`b${a + 1}`).style.backgroundColor = 'green'

                }
                if (aside > 1) {

                    document.getElementById(`b${a - 1}`).style.backgroundColor = 'green'
                }
                if (aup < 800) {

                    document.getElementById(`b${a + 100}`).style.backgroundColor = 'green'  
                }
                if (aup > 100) {

                    document.getElementById(`b${a - 100}`).style.backgroundColor = 'green'
                }

                if (aup > 100 && aside < 8) {

                    document.getElementById(`b${a - 100 + 1}`).style.backgroundColor = 'green'
                }
                if (aup > 100 && aside > 1) {

                    document.getElementById(`b${a - 100 - 1}`).style.backgroundColor = 'green'
                }
                if (aup < 800 && aside < 8) {

                    document.getElementById(`b${a + 100 + 1}`).style.backgroundColor = 'green'
                }
                if (aup < 800 && aside > 1) {

                    document.getElementById(`b${a + 100 - 1}`).style.backgroundColor = 'green'
                }

                item.style.backgroundColor = 'blue'

            }

            // KNIGHT

            if (item.textContent == `${toggle}knight`) {


                if (aside < 7 && aup < 800) {
                    document.getElementById(`b${a + 100 + 2}`).style.backgroundColor = 'green'
                }
                if (aside < 7 && aup > 200) {
                    document.getElementById(`b${a - 100 + 2}`).style.backgroundColor = 'green'
                }
                if (aside < 8 && aup < 700) {
                    document.getElementById(`b${a + 200 + 1}`).style.backgroundColor = 'green'
                }
                if (aside > 1 && aup < 700) {
                    document.getElementById(`b${a + 200 - 1}`).style.backgroundColor = 'green'
                }
                if (aside > 2 && aup < 800) {
                    document.getElementById(`b${a - 2 + 100}`).style.backgroundColor = 'green'
                }
                if (aside > 2 && aup > 100) {
                    document.getElementById(`b${a - 2 - 100}`).style.backgroundColor = 'green'
                }
                if (aside < 8 && aup > 200) {
                    document.getElementById(`b${a - 200 + 1}`).style.backgroundColor = 'green'
                }
                if (aside > 1 && aup > 200) {
                    document.getElementById(`b${a - 200 - 1}`).style.backgroundColor = 'green'
                }

                item.style.backgroundColor = 'blue'

            }

            // QUEEN

            if (item.textContent == `${toggle}queen`) {
                for (let i = 1; i < 9; i++) {

                    if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).textContent == 0) {
                        document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                    }
                    else if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).textContent !== 0) {
                        document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                        break
                    }
                }

                for (let i = 1; i < 9; i++) {

                    if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).textContent == 0) {
                        document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                    }
                    else if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).textContent !== 0) {
                        document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                        break
                    }
                }

                for (let i = 1; i < 9; i++) {

                    if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).textContent == 0) {
                        document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                    }
                    else if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).textContent !== 0) {
                        document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                        break
                    }
                }

                for (let i = 1; i < 9; i++) {

                    if ((a - i) > (aup) && document.getElementById(`b${a - i}`).textContent == 0) {
                        document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                    }
                    else if ((a - i) > (aup) && document.getElementById(`b${a - i}`).textContent !== 0) {
                        document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                        break
                    }
                }



                for (let i = 1; i < 9; i++) {
                    if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).textContent.length == 0) {
                        document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                    }
                    else if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).textContent.length !== 0) {
                        document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                        break
                    }
                }


                for (let i = 1; i < 9; i++) {
                    if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).textContent.length == 0) {
                        document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                    }
                    else if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).textContent.length !== 0) {
                        document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                        break
                    }
                }


                for (let i = 1; i < 9; i++) {
                    if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).textContent.length == 0) {
                        document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                    }
                    else if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).textContent.length !== 0) {
                        document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                        break
                    }

                }


                for (let i = 1; i < 9; i++) {
                    if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).textContent.length == 0) {
                        document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                    }
                    else if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).textContent.length !== 0) {
                        document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                        break
                    }
                }
                item.style.backgroundColor = 'blue'
            }

            // BISHOP

            if (item.textContent == `${toggle}bishop`) {
                for (let i = 1; i < 9; i++) {
                    if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).textContent.length == 0) {
                        document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                    }
                    else if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).textContent.length !== 0) {
                        document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                        break
                    }
                }


                for (let i = 1; i < 9; i++) {
                    if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).textContent.length == 0) {
                        document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                    }
                    else if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).textContent.length !== 0) {
                        document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                        break
                    }
                }


                for (let i = 1; i < 9; i++) {
                    if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).textContent.length == 0) {
                        document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                    }
                    else if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).textContent.length !== 0) {
                        document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                        break
                    }

                }


                for (let i = 1; i < 9; i++) {
                    if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).textContent.length == 0) {
                        document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                    }
                    else if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).textContent.length !== 0) {
                        document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                        break
                    }
                }
                 item.style.backgroundColor = 'blue'
            }

            // ROOK

            if (item.textContent == `${toggle}rook`) {

                for (let i = 1; i < 9; i++) {

                    if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).textContent == 0) {
                        document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                    }
                    else if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).textContent !== 0) {
                        document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                        break
                    }
                }

                for (let i = 1; i < 9; i++) {

                    if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).textContent == 0) {
                        document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                    }
                    else if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).textContent !== 0) {
                        document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                        break
                    }
                }

                for (let i = 1; i < 9; i++) {

                    if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).textContent == 0) {
                        document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                    }
                    else if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).textContent !== 0) {
                        document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                        break
                    }
                }

                for (let i = 1; i < 9; i++) {

                    if ((a - i) > (aup) && document.getElementById(`b${a - i}`).textContent == 0) {
                        document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                    }
                    else if ((a - i) > (aup) && document.getElementById(`b${a - i}`).textContent !== 0) {
                        document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                        break
                    }
                }
                item.style.backgroundColor = 'blue'
            }
        }

        // Toggling the turn
        if (tog % 2 !== 0) {
            document.getElementById('tog').textContent = "White's Turn"
            whosTurn('W')
        }
        if (tog % 2 == 0) {
            document.getElementById('tog').textContent = "Black's Turn"
            whosTurn('B')
        }
        // reddish()
    })
})
   window.onload = () => {
    const tenMinutes = 60 * 10; 
    const display = document.querySelector('#timer');
  
};




document.querySelectorAll('.box').forEach(hathiTest => {

    hathiTest.addEventListener('click', function () {

        if (hathiTest.style.backgroundColor == 'blue') {

            blueId = hathiTest.id
            blueText = hathiTest.textContent

            document.querySelectorAll('.box').forEach(hathiTest2 => {

                hathiTest2.addEventListener('click', function () {
                    if (hathiTest2.style.backgroundColor == 'green' && hathiTest2.textContent.length == 0) {
                        document.getElementById(blueId).textContent = ''
                        hathiTest2.textContent = blueText
                        coloring()
                        insertImage()
                    }
                })
            })
        }
    })
})

// Prvents from selecting multiple elements
z = 0
document.querySelectorAll('.box').forEach(ee => {
  ee.addEventListener('click', function () {
      z = z + 1
      if (z % 2 == 0 && ee.style.backgroundColor !== 'green') {
          coloring()
      }
  })
})






//Coloring the board

function coloring() {
    const color = document.querySelectorAll('.box')

    color.forEach(color => {
        getId = color.id
        arr = Array.from(getId)
        arr.shift()
        aside = Number(arr.pop())
        aup = Number(arr.shift())
        a = aside + aup

        if (a % 2 == 0) {
            color.style.backgroundColor = 'rgb(232 235 239)'
        }
        if (a % 2 !== 0) {
            color.style.backgroundColor = 'rgb(125 135 150)'
        }
    })
}
coloring()
</script>
</body>
</html> -->



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            place-items: center;
            justify-content: center;
            overflow-x: hidden;
            height: 100vh;
        }

        .container {
            display: grid;
            place-items: center;
            justify-content: center;
        }

        .div {
            display: flex;
        }

        ul {
            display: grid;
            grid-template-columns: 1fr;
        }

        li {
            list-style: none;
            display: grid;
            place-items: center;
            font-size: 0;
        }

        .box {
            width: 75px;
            height: 55px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        h1 {
            margin: 20px;
            font-size: 2.5rem;
            text-align: center;
            color: black;
            border: 2px solid black;
            padding: 10px;
            background-color: gray;
            border-radius: 5px;
        }

        #tog {
            margin: 40px 0px;
            font-size: 1.5rem;
            text-align: left;
            background-color: #fff;
            color: #000;
            border: 2px solid #fff;
            padding: 10px;
            border-radius: 5px;
        }

        #reset-btn, .sumbmit {
            background-color: #607d83;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-top: 4px;
            cursor: pointer;
        }

        .box img {
            width: 40px;
            height: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CHESS</h1>
        <ul class="ul"></ul>
        <div id="timer"></div>
        <input type="text" id="name" placeholder="Enter your name">
        <div class="sumbmit" id="stop-btn">Start Game</div>
        <div id="timeRangesDiv"></div>
        <h2 id="tog">White's Turn</h2>
        <h2 id="message"></h2>
        <h2 id="reset-btn">Reset Game</h2>
    </div>

    <script>
        const chessboard = document.querySelector('.ul');

        function createChessboard() {
            for (let i = 8; i >= 1; i--) {
                const row = document.createElement('div');
                row.className = 'div';
                row.id = `row${i}`;

                for (let j = 1; j <= 8; j++) {
                    const box = document.createElement('li');
                    box.className = 'box';
                    box.id = `b${i}${j}`;

                    if (i === 8) {
                        if (j === 1 || j === 8) box.textContent = 'Brook';
                        else if (j === 2 || j === 7) box.textContent = 'Bknight';
                        else if (j === 3 || j === 6) box.textContent = 'Bbishop';
                        else if (j === 4) box.textContent = 'Bqueen';
                        else if (j === 5) box.textContent = 'Bking';
                    } else if (i === 7) {
                        box.textContent = 'Bpawn';
                    } else if (i === 2) {
                        box.textContent = 'Wpawn';
                    } else if (i === 1) {
                        if (j === 1 || j === 8) box.textContent = 'Wrook';
                        else if (j === 2 || j === 7) box.textContent = 'Wknight';
                        else if (j === 3 || j === 6) box.textContent = 'Wbishop';
                        else if (j === 4) box.textContent = 'Wqueen';
                        else if (j === 5) box.textContent = 'Wking';
                    }

                    row.appendChild(box);
                }

                chessboard.appendChild(row);
            }
        }

        function insertImage() {
            document.querySelectorAll('.box').forEach(image => {
                if (image.textContent.length !== 0) {
                    const pieceType = image.textContent;
                    const imageName = pieceType.includes('pawn') ? 'pawn' : pieceType.slice(0, 1).toLowerCase() + pieceType.slice(1, 5);
                    image.innerHTML = `${pieceType} <img class='all-img' src="${imageName}.png" alt="">`;
                }
            });
        }

        function updateTurn() {
            const turnDisplay = document.getElementById('tog');
            turnDisplay.textContent = (tog % 2 !== 0) ? "White's Turn" : "Black's Turn";
        }

        function handlePieceClick(item) {
            // if (gameEnded) return;

            if (item.style.backgroundColor === 'green' && item.textContent.length === 0) {
                tog += 1;
            } else if (item.style.backgroundColor === 'green' && item.textContent.length !== 0) {
                document.querySelectorAll('.box').forEach(i => {
                    if (i.style.backgroundColor === 'blue') {
                        const blueId = i.id;
                        const blueText = i.textContent;

                        if (item.textContent === 'Wking') {
                            document.getElementById('message').textContent = 'Black wins!';
                            // gameEnded = true;
                        } else if (item.textContent === 'Bking') {
                            document.getElementById('message').textContent = 'White wins!';
                            // gameEnded = true;
                        }

                        document.getElementById(blueId).textContent = '';
                        item.textContent = blueText;
                        updateTurn();
                        insertImage();
                        tog += 1;
                    }
                });
            }

            // if (gameEnded) return;

            const getId = item.id;
            const arr = Array.from(getId);
            arr.shift();
            const aside = Number(arr.pop());
            arr.push('0');
            const aup = Number(arr.join(''));
            const a = aside + aup;

            function whosTurn(toggle) {
                if (item.textContent === `${toggle}pawn`) {
                    item.style.backgroundColor = 'blue';

                    if (toggle === 'W' && aup < 800) {
                        if (document.getElementById(`b${a + 100}`).textContent.length === 0) {
                            document.getElementById(`b${a + 100}`).style.backgroundColor = 'green';
                            if (document.getElementById(`b${a + 200}`).textContent.length === 0 && aup < 300) {
                                document.getElementById(`b${a + 200}`).style.backgroundColor = 'green';
                            }
                        }
                        if (aside < 8 && document.getElementById(`b${a + 100 + 1}`).textContent.length !== 0) {
                            document.getElementById(`b${a + 100 + 1}`).style.backgroundColor = 'green';
                        }
                        if (aside > 1 && document.getElementById(`b${a + 100 - 1}`).textContent.length !== 0) {
                            document.getElementById(`b${a + 100 - 1}`).style.backgroundColor = 'green';
                        }
                    }

                    if (toggle === 'B' && aup > 100) {
                        if (document.getElementById(`b${a - 100}`).textContent.length === 0) {
                            document.getElementById(`b${a - 100}`).style.backgroundColor = 'green';
                            if (document.getElementById(`b${a - 200}`).textContent.length === 0 && aup > 700) {
                                document.getElementById(`b${a - 200}`).style.backgroundColor = 'green';
                            }
                        }
                        if (aside < 8 && document.getElementById(`b${a - 100 + 1}`).textContent.length !== 0) {
                            document.getElementById(`b${a - 100 + 1}`).style.backgroundColor = 'green';
                        }
                        if (aside > 1 && document.getElementById(`b${a - 100 - 1}`).textContent.length !== 0) {
                            document.getElementById(`b${a - 100 - 1}`).style.backgroundColor = 'green';
                        }
                    }
                } else if (item.textContent === `${toggle}king`) {
                    // Add king movement logic
                } else if (item.textContent === `${toggle}knight`) {
                    // Add knight movement logic
                } else if (item.textContent === `${toggle}queen`) {
                    // Add queen movement logic
                }
            }

            whosTurn(tog % 2 !== 0 ? 'W' : 'B');
        }

        function init() {
            createChessboard();
            insertImage();
            // let gameEnded = false;
            let tog = 1;

            document.querySelectorAll('.box').forEach(item => {
                item.addEventListener('click', () => handlePieceClick(item));
            });

            document.getElementById('reset-btn').addEventListener('click', () => {
                document.location.reload();
            });
        }

        init();
    </script>
</body>
</html>
